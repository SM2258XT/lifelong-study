---
title: Prototype：原型模式
updated: 2022-10-25T10:35:03
created: 2022-10-23T17:01:58
---

**概念：**
通过克隆原型对象，来创建新对象，而无需再进行一遍复杂的初始化过程。这也是创建复杂对象的另一种方式。
浅拷贝：引用类型属性，仅是指针地址拷贝一下，实际引用指向同一个对象
深拷贝：创建新对象，各自的指针都不同。

**三个角色**
​Prototype：抽象原型类。声明克隆自身的接口。
ConcretePrototype：具体原型类。实现克隆的具体操作。
Client：客户类。让一个原型克隆自身，从而获得一个新的对象。

**Object#object.clone()**
clone()是实例方法，将对象进行克隆（必须先实现Cloneable接口，否则CloneNotSupportedException）
而为了控制拷贝的深度，所以一般都需要重写clone()方法。

**使用场景**
1.  如果创建新对象成本较大，我们可以利用已有的对象进行复制来获得。
2.  如果系统要保存对象的状态，而对象的状态变化很小，或者对象本身占内存不大的时候，也可以使用原型模式配合备忘录模式来应用。相反，如果对象的状态变化很大，或者对象占用的内存很大，那么采用状态模式会比原型模式更好。 3、需要避免使用分层次的工厂类来创建分层次的对象，并且类的实例对象只有一个或很少的几个组合状态，通过复制原型对象得到新实例可能比使用构造函数创建一个新实例更加方便。

![](C:\Users\82609\AppData\Local\Temp\Java\pandoc/media/image1.png)
