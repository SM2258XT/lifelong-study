---
title: 聚簇索引和辅助索引
updated: 2022-10-17T13:02:07
created: 2022-10-05T10:49:13
---

**概念：**
- 不是单独的索引类型！是指**树节点的数据存储方式**
- 非聚簇索引都是辅助索引
聚簇索引的叶子节点存放的是主键值和**真实数据**，支持**覆盖索引**；而非聚簇索引的叶子节点存放的是主键值或指向数据行的指针（由存储引擎决定）

**Innodb 主键采用聚簇索引**
在 Innodb 存储引擎，B+ 树索引可以分为聚簇索引（也称聚集索引、clustered index）和辅助索引（也称非聚簇索引或二级索引、secondary index、non-clustered index）
聚簇索引是按照每张表的主键构造一颗 B+ 树，**叶子节点**中存放的就是整张表的数据，将聚簇索引的叶子节点称为数据页

这个特性决定了**数据也是索引的一部分**，所以一张表只能有一个聚簇索引
辅助索引的存在不影响聚簇索引中数据的组织，所以一张表可以有多个辅助索引
优点：
- 数据访问更快，聚簇索引将索引和数据保存在同一个 B+树中，因此从聚簇索引中获取数据比非聚簇索引更快
- 聚簇索引对于主键的排序查找和范围查找速度非常快
缺点：
- 插入速度严重依赖于插入顺序，按照主键的顺序（递增）插入是最快的方式，否则将会出现页分裂，严重影响性能。所以对于 InnoDB 表，一般都会定义一个自增的 ID 列为主键
- 更新主键的代价很高，将会导致被更新的行移动，所以对于 InnoDB 表，一般定义主键为不可更新
- 二级索引访问需要两次索引查找，第一次找到主键值，第二次根据主键值找到行数据

**辅助索引：聚簇索引之上创建的索引称之为辅助索引，非聚簇索引都是辅助索引**
辅助索引叶子节点存的是**主键值**，而不是地址，因此访问数据必须二次查找（回表），可以使用覆盖索引解决。
