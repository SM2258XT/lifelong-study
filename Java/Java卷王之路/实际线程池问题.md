---
title: 实际线程池问题
updated: 2022-11-21T08:01:24
created: 2022-11-21T07:52:35
---

实际线程池问题
2022年11月21日
7:52

**核心问题**：参数并不好配置。一方面需要个人经验，另一方面参数与任务类型密切相关，比如IO密集和CPU密集的任务运行起来差异非常大

**事故1：大量调用降级**
该接口内部使用线程池做并行计算，由于没有预估好调用的流量，导致maxPoolSize偏小，大量抛出拒绝策略，触发接口降级条件

**事故2：服务雪崩**
XX服务执行时间过程，恰好又作为上游服务，导致整体超时，大量下游服务调用超时失败。
线程池队列设置过长，导致许多人物堆积在队列中等待，最终下游判定超时失败。

![](C:\Users\82609\AppData\Local\Temp\Java\pandoc/media/image1.png)![](C:\Users\82609\AppData\Local\Temp\Java\pandoc/media/image2.png)
