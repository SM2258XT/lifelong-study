---
title: 缓存更新套路
updated: 2022-11-12T10:19:37
created: 2022-11-12T09:51:31
---

缓存更新套路
<https://coolshell.cn/articles/17416.html>
2022年11月12日
9:51

1.  传统：先删缓存，导致并发读老数据并更新到缓存
条件：1）并发写、2）并发读
1.  CAP：先更数据库，但是并发查会查旧缓存
条件：1）并发写、2）刚好缓存失效、3）并发读，就直接读数据库旧数据了

额外：如果缓存还没更新，读到的是旧数据，相比于上面的情况更容易发生
可以看出，虽然都有缓存旧数据隐患，但是CAP

1.  
