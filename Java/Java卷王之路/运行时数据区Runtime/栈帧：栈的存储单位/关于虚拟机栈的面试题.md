---
title: 关于虚拟机栈的面试题
updated: 2023-02-24T09:05:53
created: 2022-05-05T20:54:21
---

1.  方法中定义的局部变量是否线程安全？
具体问题具体分析

如果只有一个线程才可以操作此数据，则必是线程安全的。如果有多个线程操作此数据，则此数据是共享数据。如果不考虑同步机制的话，会存在线程安全问题。

如果对象是在内部产生，并在内部消亡，没有返回到外部，那么它就是线程安全的，反之则是线程不安全的。
1.  分配的栈内存越大越好么？
不是，一定时间内降低了SOF概率，但是会挤占其它的线程空间，因为整个虚拟机的内存空间是有限的
1.  举例栈溢出的情况？
SOF（StackOverflowError），栈大小分为固定的，和动态变化。如果是固定的就可能出现StackOverflowError。如果是动态变化的，内存不足时就可能出现OOM

总结：OOM是针对整个虚拟机，SOF是针对栈空间。前者要大很多。
