---
title: 静态链接与动态链接
updated: 2022-11-11T08:42:01
created: 2022-05-05T20:07:42
---

静态链接与动态链接
方法存储在运行时常量池吗？
2022年5月5日
20:07

**动态链接：**指向运行时常量池的**方法引用**
1.  每一个栈帧内部都包含一个**指向运行时常量池**中该栈帧所属方法的**引用**。包含这个引用的目的就是为了支持当前方法的代码能够实现动态链接（Dynamic Linking）
比如：invokedynamic指令
1.  在Java源文件被编译到字节码文件中时，所有的变量和方法引用都作为符号引用（Symbolic Reference）保存在class文件的常量池里。
描述一个方法调用了另外的其他方法时，就是通过常量池中指向方法的符号引用来表示的，那么动态链接的作用就是为了将这些符号引用转换为调用方法的直接引用
意思就是说：方法调用，由class文件中“写死”的字面量，变成了方法实际的地址。

**静态链接与动态链接**
在JVM中，将符号引用转换为调用方法的直接引用与方法的绑定机制相关
静态链接：当一个字节码文件被装载进JVM内部时，如果被调用的目标方法在**编译期确定**，且运行期保持不变时，这种情况下将调用方法的符号引用转换为直接引用的过程
动态链接：如果被调用的方法在编译期无法被确定下来，只能够在程序**运行期**将调用的方法的符号转换为直接引用，由于这种引用转换过程具备**动态性**，因此也被称之为动态链接。

**早期绑定与晚期绑定**
1.  静态链接与动态链接针对的是**方法**。早期绑定和晚期绑定范围更广。早期绑定涵盖了静态链接，晚期绑定涵盖了动态链接。
2.  静态链接和动态链接**具体到方法上**的绑定机制为：早期绑定（Early Binding）和晚期绑定（Late Binding）。
绑定是一个字段、方法或者类在符号引用被替换为直接引用的过程，这仅仅发生一次。
1.  早期绑定
早期绑定就是指被调用的目标方法如果在编译期可知，且运行期保持不变时，即可将这个方法与所属的类型进行绑定，这样一来，由于明确了被调用的目标方法究竟是哪一个，因此也就可以使用静态链接的方式将符号引用转换为直接引用。
1.  晚期绑定
如果被调用的方法在编译期无法被确定下来，只能够在程序运行期根据实际的类型绑定相关的方法，这种绑定方式也就被称之为晚期绑定。

比如说多态机制：

public void doSome(Animal a){

super.eat() //早期绑定，因为无论本类是什么，父类都是Ainmal可以确定；同理，this()也是早期绑定

a.eat(); //晚期绑定，因为不知道a实际到底是cat还是dog，不知道是谁的eat()方法，只有在运行时才确定的下来

}
