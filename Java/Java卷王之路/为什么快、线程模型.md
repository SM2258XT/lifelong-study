---
title: 为什么快、线程模型
updated: 2022-11-21T18:48:44
created: 2022-05-15T16:35:12
---

- **单线程的redis为什么这么快？**
  - **纯内存操作、单线程避免了频繁的上下文切换、采用了非阻塞I/O多路复用机制**
  - **基于内存的操作，CPU不是Redis的瓶颈，Redis的瓶颈最有可能是机器内存或 者网络带宽，并且单线程更容易实现，额外开销小。Redis利用队列技术将并发访问变为串行访问**
  - **IO多路复用**
- **既然是单线程的，那么同时发来大量请求如何处理？**
redis是自己封装了一个简单的AeEvent事件处理框架，通过IO多路复用（select，epoll，kqueue，依据不同的平台，采取不同的实现）来处理多个客户端请求的
- **Redis线程模型**
  - **I/O多路复用程序负责监听多个套接字， 并向文件事件分派器传送那些产生了事件的套接字。**
  - **即使多个文件事件并发出现， I/O多路复用程序总是会将所有产生事件的套接字都逐个入队到一个队列里面。**
复用程序以有序、同步、每次一个套接字的方式向文件事件分派器传送套接字，当上一个套接字产生的事件被处理器执行完毕之后，I/O多路复用程序才会继续向文件事件分派器传送下一个套接字。
- 如果一个套接字又可读又可写的话， 那么服务器将先读套接字，后写套接字

![](C:\Users\82609\AppData\Local\Temp\Java\pandoc/media/image1.png)
