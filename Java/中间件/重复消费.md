---
title: 重复消费
updated: 2022-10-04T08:49:46
created: 2022-10-04T08:49:16
---

重复消费
2022年10月4日
8:49

消费者在消费 MQ 中的消息时，MQ 已把消息发送给消费者，消费者在给MQ 返回 ack 时网络中断，
故 MQ 未收到确认信息，该条消息会重新发给其他的消费者，或者在网络重连后再次发送给该消费者，但
实际上该消费者已成功消费了该条消息，造成消费者消费了重复的消息。

**解决思路：**
MQ 消费者的幂等性的解决一般使用全局 ID 或者写个唯一标识比如时间戳 或者 UUID 或者订单消费
者消费 MQ 中的消息也可利用 MQ 的该 id 来判断，或者可按自己的规则生成一个全局唯一 id，每次消费消
息时用该 id 先判断该消息是否已消费过。

