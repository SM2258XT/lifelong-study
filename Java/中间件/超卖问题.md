---
title: 超卖问题
updated: 2022-10-27T10:31:44
created: 2022-10-27T10:26:11
---

**超卖问题概述**
有很多情况，这里只举一个例子详细说明。
总库存100，此时下了3个单，并发了3个线程扣库存
错误出在：3线程同时读到了100（而不是其他线程修改后的结果），在JVM本地环境中扣库存为99然后写回去，此时所有操作全部完成后，库存剩余竟然为99而不是97
超卖是指，本来最多卖100台，但是实际因为少扣了库存，导致真实卖出的有102+台

解决：
分布式锁
