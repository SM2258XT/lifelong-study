---
title: keepalived
updated: 2023-06-29T20:14:48
created: 2023-06-20T16:49:34
---

主要通过虚拟ip来实现。在多台机器上配置后，相当于连上了一个虚拟路由器，每个机器有一个新的虚拟ip。
例如23是vip机器，类似于网关入口，77和78则是两个业务机器。外部访问从23进入，具体根据keepalived进行77或78的切换
原理：虚拟ip、ip飘逸
关键：故障转移、数据同步

**监控脚本需要自己来写。**
类似于keepalive提供一个boolean接口，至于具体应用如何判断为存活，需要自己来实现。

一些集群的**HA高可用**实现
mysql互为主备（通过my.ini实现），是mysql内部的功能
这里引入keepalived是为了解决：在一般主从架构中，主节点必须保证不能挂掉的缺陷。引入之后，即使主节点挂掉一个也保证总体正常。

redis主备高可用
目前公司主要支持2台机器，所以才只能手动用keepalived，而无法满足redis自带集群的最低要求。
如果有多台机器，则可以直接用redis自带的三种集群功能。
